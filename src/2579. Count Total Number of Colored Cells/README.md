# \[M\] 2579. Count Total Number of Colored Cells

## 題目

- [LeetCode 連結](https://leetcode.com/problems/count-total-number-of-colored-cells)
- **主題**：Math
- **難度**：Medium
- **Rating**：1356
- **Daily**：2025-03-05

## 題目描述

在一個無限大的二維網格中，所有單元格一開始都是未上色的。給定一個正整數 `n`，表示你需要執行以下規則 `n` 分鐘：

1. **第一分鐘**，選擇任意一個單元格並將其染成藍色。
2. **之後的每分鐘**，將所有與藍色單元格相鄰的未染色單元格塗成藍色。

參考原題目網格在 **第 1、2、3 分鐘** 後的圖示。請返回 `n` 分鐘後，被染色的單元格總數。

### 範例 1

```plain
輸入：n = 1
輸出：1
說明：1 分鐘後，只有 1 個被染色的單元格，因此返回 1。
```

### 範例 2

```plain
輸入：n = 2
輸出：5
說明：2 分鐘後，邊界上有 4 個染色的單元格，中心仍然有 1 個，因此返回 5。
```

### 限制條件

- `1 <= n <= 10^5`

---

## 解題思路

看題目主要是在找規律：

- n = 1, sum = 1
- n = 2, sum = 1 + 4
- n = 3, sum = 1 + 4 + 8
- n = 4, sum = 1 + 4 + 8 + 12
- n = 5, sum = 1 + 4 + 8 + 12 + 16

如果直覺去根據 n 數量加總的話可以用這樣的程式算：

```ts
function coloredCells(n: number): number {
  let sum = 1;

  for (let i = 1; i < n; i++) {
    sum += 4 * i;
  }

  return sum;
}
```

但其實在有規律的狀況下也可以去推導公式直接根據 `n` 值計算就可以：

- 1 + (4 \* 1) + (4 \* 2) + ... + (4 \* (n - 1))
- 1 + 4 \* (1 + 2 + 3 + 4 + … + (n - 1))
- 1 + 4 \* ((1 + (n - 1)) \* (n - 1)) / 2
- 1 + 2 \* (n − 1) \* n

所以其實只要這樣就解決了，這個只是在考邏輯跟數學吧：

```ts
function coloredCells(n: number): number {
  return 1 + 2 * (n - 1) * n;
}
```
